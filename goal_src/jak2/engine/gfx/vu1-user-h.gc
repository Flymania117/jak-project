;;-*-Lisp-*-
(in-package goal)

;; name: vu1-user-h.gc
;; name in dgo: vu1-user-h
;; dgos: ENGINE, GAME

(defenum bucket-id
  :type int32
  :bitfield #f
  (bucket-0 0)
  (bucket-1 1)
  (bucket-2 2)
  (bucket-3 3)
  (bucket-4 4)
  (bucket-5 5)
  (bucket-6 6)
  (bucket-7 7)     ;; level 0 tex
  (bucket-8 8)
  (bucket-9 9)
  (bucket-10 10)
  (bucket-11 11)
  (bucket-12 12)
  (bucket-13 13)
  (bucket-14 14)
  (bucket-15 15)
  (bucket-16 16)
  (bucket-17 17)
  (bucket-18 18)
  (bucket-19 19)
  (bucket-20 20)
  (bucket-21 21)
  (bucket-22 22)
  (bucket-23 23)
  (bucket-24 24)
  (bucket-25 25)
  (bucket-26 26)
  (bucket-27 27)
  (bucket-28 28)
  (bucket-29 29)
  (bucket-30 30)
  (bucket-31 31)
  (bucket-32 32)
  (bucket-33 33)
  (bucket-34 34)
  (bucket-35 35)
  (bucket-36 36)
  (bucket-37 37)
  (bucket-38 38)
  (bucket-39 39)
  (bucket-40 40)
  (bucket-41 41)
  (bucket-42 42)
  (bucket-43 43)
  (bucket-44 44)
  (bucket-45 45)
  (bucket-46 46)
  (bucket-47 47)
  (bucket-48 48)
  (bucket-49 49)
  (bucket-50 50)
  (bucket-51 51)
  (bucket-52 52)
  (bucket-53 53)
  (bucket-54 54)
  (bucket-55 55)
  (bucket-56 56)
  (bucket-57 57)
  (bucket-58 58)
  (bucket-59 59)
  (bucket-60 60)
  (bucket-61 61)
  (bucket-62 62)
  (bucket-63 63)
  (bucket-64 64)
  (bucket-65 65)
  (bucket-66 66)
  (bucket-67 67)
  (bucket-68 68)
  (bucket-69 69)
  (bucket-70 70)
  (bucket-71 71)
  (bucket-72 72)
  (bucket-73 73)
  (bucket-74 74)
  (bucket-75 75)
  (bucket-76 76)
  (bucket-77 77)
  (bucket-78 78)
  (bucket-79 79)
  (bucket-80 80)
  (bucket-81 81)
  (bucket-82 82)
  (bucket-83 83)
  (bucket-84 84)
  (bucket-85 85)
  (bucket-86 86)
  (bucket-87 87)
  (bucket-88 88)
  (bucket-89 89)
  (bucket-90 90)
  (bucket-91 91)
  (bucket-92 92)
  (bucket-93 93)
  (bucket-94 94)
  (bucket-95 95)
  (bucket-96 96)
  (bucket-97 97)
  (bucket-98 98)
  (bucket-99 99)
  (bucket-100 100)
  (bucket-101 101)
  (bucket-102 102)
  (bucket-103 103)
  (bucket-104 104)
  (bucket-105 105)
  (bucket-106 106)
  (bucket-107 107)
  (bucket-108 108)
  (bucket-109 109)
  (bucket-110 110)
  (bucket-111 111)
  (bucket-112 112)
  (bucket-113 113)
  (bucket-114 114)
  (bucket-115 115)
  (bucket-116 116)
  (bucket-117 117)
  (bucket-118 118)
  (bucket-119 119)
  (bucket-120 120)
  (bucket-121 121)
  (bucket-122 122)
  (bucket-123 123)
  (bucket-124 124)
  (bucket-125 125)
  (bucket-126 126)
  (bucket-127 127)
  (bucket-128 128)
  (bucket-129 129)
  (bucket-130 130)
  (bucket-131 131)
  (bucket-132 132)
  (bucket-133 133)
  (bucket-134 134)
  (bucket-135 135)
  (bucket-136 136)
  (bucket-137 137)
  (bucket-138 138)
  (bucket-139 139)
  (bucket-140 140)
  (bucket-141 141)
  (bucket-142 142)
  (bucket-143 143)
  (bucket-144 144)
  (bucket-145 145)
  (bucket-146 146)
  (bucket-147 147)
  (bucket-148 148)
  (bucket-149 149)
  (bucket-150 150)
  (bucket-151 151)
  (bucket-152 152)
  (bucket-153 153)
  (bucket-154 154)
  (bucket-155 155)
  (bucket-156 156)
  (bucket-157 157)
  (bucket-158 158)
  (bucket-159 159)
  (bucket-160 160)
  (bucket-161 161)
  (bucket-162 162)
  (bucket-163 163)
  (bucket-164 164)
  (bucket-165 165)
  (bucket-166 166)
  (bucket-167 167)
  (bucket-168 168)
  (bucket-169 169)
  (bucket-170 170)
  (bucket-171 171)
  (bucket-172 172)
  (bucket-173 173)
  (bucket-174 174)
  (bucket-175 175)
  (bucket-176 176)
  (bucket-177 177)
  (bucket-178 178)
  (bucket-179 179)
  (bucket-180 180)
  (bucket-181 181)
  (bucket-182 182)
  (bucket-183 183)
  (bucket-184 184)
  (bucket-185 185)
  (bucket-186 186)
  (bucket-187 187)
  (bucket-188 188)
  (bucket-189 189)
  (bucket-190 190)
  (bucket-191 191)
  (bucket-192 192)
  (bucket-193 193)
  (bucket-194 194)
  (bucket-195 195)
  (bucket-196 196)
  (bucket-197 197)
  (bucket-198 198)
  (bucket-199 199)
  (bucket-200 200)
  (bucket-201 201)
  (bucket-202 202)
  (bucket-203 203)
  (bucket-204 204)
  (bucket-205 205)
  (bucket-206 206)
  (bucket-207 207)
  (bucket-208 208)
  (bucket-209 209)
  (bucket-210 210)
  (bucket-211 211)
  (bucket-212 212)
  (bucket-213 213)
  (bucket-214 214)
  (bucket-215 215)
  (bucket-216 216)
  (bucket-217 217)
  (bucket-218 218)
  (bucket-219 219)
  (bucket-220 220)
  (bucket-221 221)
  (bucket-222 222)
  (bucket-223 223)
  (bucket-224 224)
  (bucket-225 225)
  (bucket-226 226)
  (bucket-227 227)
  (bucket-228 228)
  (bucket-229 229)
  (bucket-230 230)
  (bucket-231 231)
  (bucket-232 232)
  (bucket-233 233)
  (bucket-234 234)
  (bucket-235 235)
  (bucket-236 236)
  (bucket-237 237)
  (bucket-238 238)
  (bucket-239 239)
  (bucket-240 240)
  (bucket-241 241)
  (bucket-242 242)
  (bucket-243 243)
  (bucket-244 244)
  (bucket-245 245)
  (bucket-246 246)
  (bucket-247 247)
  (bucket-248 248)
  (bucket-249 249)
  (bucket-250 250)
  (bucket-251 251)
  (bucket-252 252)
  (bucket-253 253)
  (bucket-254 254)
  (bucket-255 255)
  (bucket-256 256)
  (bucket-257 257)
  (bucket-258 258)
  (bucket-259 259)
  (bucket-260 260)
  (bucket-261 261)
  (bucket-262 262)
  (bucket-263 263)
  (bucket-264 264)
  (bucket-265 265)
  (bucket-266 266)
  (bucket-267 267)
  (bucket-268 268)
  (bucket-269 269)
  (bucket-270 270)
  (bucket-271 271)
  (bucket-272 272)
  (bucket-273 273)
  (bucket-274 274)
  (bucket-275 275)
  (bucket-276 276)
  (bucket-277 277)
  (bucket-278 278)
  (bucket-279 279)
  (bucket-280 280)
  (bucket-281 281)
  (bucket-282 282)
  (bucket-283 283)
  (bucket-284 284)
  (bucket-285 285)
  (bucket-286 286)
  (bucket-287 287)
  (bucket-288 288)
  (bucket-289 289)
  (bucket-290 290)
  (bucket-291 291)
  (bucket-292 292)
  (bucket-293 293)
  (bucket-294 294)
  (bucket-295 295)
  (bucket-296 296)
  (bucket-297 297)
  (bucket-298 298)
  (bucket-299 299)
  (bucket-300 300)
  (bucket-301 301)
  (bucket-302 302)
  (bucket-303 303)
  (bucket-304 304)
  (bucket-305 305)
  (bucket-306 306)
  (bucket-307 307)
  (bucket-308 308)
  (bucket-309 309)
  (bucket-310 310)
  (bucket-311 311)
  (bucket-312 312)
  (bucket-313 313)
  (bucket-314 314)
  (bucket-315 315)
  (bucket-316 316)
  (bucket-317 317)
  (bucket-318 318)
  (bucket-319 319)
  (bucket-320 320)
  (bucket-321 321)
  (bucket-322 322)
  (bucket-323 323)
  (bucket-324 324)
  (debug 325)
  )


(defenum vu1-renderer-mask
  :type uint64
  :bitfield #t
  (rn0)
  (rn1)
  (rn2)
  (rn3)
  (rn4)
  (rn5)
  (rn6)
  (rn7)
  (rn8)
  (rn9)
  (rn10)
  (rn11)
  (rn12)
  (rn13)
  (rn14)
  (rn15)
  (rn16)
  (rn17)
  (rn18)
  (rn19)
  (rn20)
  (rn21)
  (rn22)
  (rn23)
  (rn24)
  (rn25)
  (rn26)
  (rn27)
  (rn28)
  (rn29)
  (rn30)
  (rn31)
  (rn32)
  (rn33)
  (rn34)
  )

(deftype dma-foreground-sink (basic)
  ((bucket                   bucket-id  :offset-assert   4)
   (foreground-texture-page  int8       :offset-assert   8)
   (foreground-texture-level int8       :offset-assert   9)
   (foreground-output-bucket int8       :offset-assert  10)
   )
  :method-count-assert 9
  :size-assert         #xb
  :flag-assert         #x90000000b
  )

(deftype generic-bucket-state (structure)
  ((gifbuf-adr uint32  :offset-assert   0)
   (inbuf-adr  uint32  :offset-assert   4)
   )
  :allow-misaligned
  :method-count-assert 9
  :size-assert         #x8
  :flag-assert         #x900000008
  )

(deftype generic-dma-foreground-sink (dma-foreground-sink)
  ((state generic-bucket-state :inline :offset-assert  12)
   )
  :method-count-assert 9
  :size-assert         #x14
  :flag-assert         #x900000014
  )
